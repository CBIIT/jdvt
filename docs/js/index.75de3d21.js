(function(t){function e(e){for(var r,o,i=e[0],c=e[1],l=e[2],u=0,f=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(r=!1)}r&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},s={index:0},n=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/jdvt/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},1:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("h1",[t._v("JSON Data Visualization and Transformation Tool (JDVT)")]),a("p"),a("b-card",{staticClass:"col-10 m-auto",attrs:{"body-class":"text-center","header-tag":"nav","no-body":""}},[a("b-tabs",{attrs:{card:""}},[a("b-tab",{attrs:{title:"Load JSON from URL",active:""}},[a("b-card-text",[a("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Load JSON from URL"}},[a("b-form-input",{attrs:{type:"url"},model:{value:t.inputURL,callback:function(e){t.inputURL=e},expression:"inputURL"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.loadFromURL(t.inputURL)}}},[t._v("Load")])],1)],1)],1)],1),a("b-tab",{attrs:{title:"Paste JSON"}},[a("b-card-text",[a("p",[t._v("Paste your JSON content into the field below.")]),a("b-row",{staticClass:"mt-2"},[a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.inputDataAsText,expression:"inputDataAsText",modifiers:{lazy:!0}}],staticClass:"col-12 m-auto",attrs:{rows:"10"},domProps:{value:t.inputDataAsText},on:{change:function(e){t.inputDataAsText=e.target.value}}})])],1)],1),a("b-tab",{attrs:{title:"Import data from GDC"}},[a("b-card-text",[a("p",[t._v("GDC queries use a "),a("a",{attrs:{target:"_blank",href:"https://docs.gdc.cancer.gov/API/Users_Guide/Search_and_Retrieval/"}},[t._v("JSON-based query format")]),t._v(".")]),a("b-row",{staticClass:"mt-2"},[a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.gdcQueryAsData,expression:"gdcQueryAsData",modifiers:{lazy:!0}}],staticClass:"col-12 m-auto",attrs:{rows:"10"},domProps:{value:t.gdcQueryAsData},on:{change:function(e){t.gdcQueryAsData=e.target.value}}})]),a("b-row",{staticClass:"mt-2"},[a("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.gdcQueryExecute()}}},[t._v("Query")])],1)],1)],1)],1)],1),a("b-card",{directives:[{name:"show",rawName:"v-show",value:t.loadError,expression:"loadError"}],staticClass:"col-10 m-auto my-2",attrs:{"bg-variant":"danger","text-variant":"white",header:"Error reading JSON data"}},[t._v(" "+t._s(t.loadError)+" ")]),a("JSONExplorer",{attrs:{"data-name":"input data",data:t.inputData}}),a("b-card",{staticClass:"col-10 m-auto mt-2",attrs:{id:"lifter-instructions-card",header:"Transform"}},[a("p",[t._v("Providing lifting instructions in the format used by "),a("a",{attrs:{target:"_blank",href:"https://github.com/AndyA/jsonpath-lifter#README"}},[t._v("jsonpath-lifter")]),t._v(".")]),a("b-textarea",{attrs:{rows:"20"},model:{value:t.lifterInstructionsAsText,callback:function(e){t.lifterInstructionsAsText=e},expression:"lifterInstructionsAsText"}})],1),a("b-card",{directives:[{name:"show",rawName:"v-show",value:t.transformError,expression:"transformError"}],staticClass:"col-10 m-auto my-2",attrs:{"bg-variant":"danger","text-variant":"white",header:"Error reading transform instructions"}},[t._v(" "+t._s(t.transformError)+" ")]),a("JSONExplorer",{attrs:{"data-name":"transformed data",data:t.transformedJSON}}),a("b-card",{staticClass:"col-10 m-auto mt-2",attrs:{id:"json-schema-card",header:"JSON Schema"}},[a("p",[t._v("Include a JSON Schema to be used to validate the transformed data.")]),a("b-textarea",{attrs:{rows:"20"},model:{value:t.jsonSchemaAsText,callback:function(e){t.jsonSchemaAsText=e},expression:"jsonSchemaAsText"}})],1),a("b-card",{directives:[{name:"show",rawName:"v-show",value:t.jsonSchemaError,expression:"jsonSchemaError"}],staticClass:"col-10 m-auto my-2",attrs:{"bg-variant":"danger","text-variant":"white",header:"Error reading JSON Schema"}},[t._v(" "+t._s(t.jsonSchemaError)+" ")]),a("b-card",{staticClass:"col-10 m-auto mt-2",attrs:{id:"json-schema-validation-card",header:"JSON Schema validation results"}},[a("b-textarea",{attrs:{rows:"20",readonly:""},model:{value:t.jsonSchemaValidationResults,callback:function(e){t.jsonSchemaValidationResults=e},expression:"jsonSchemaValidationResults"}})],1)],1)},n=[],o=(a("99af"),a("5e06")),i=a.n(o),c=a("783b"),l=a.n(c),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{staticClass:"col-10 m-auto mt-2",attrs:{"body-class":"text-center","no-body":""}},[a("b-tabs",{attrs:{card:""}},[a("b-tab",{attrs:{title:"Display "+t.dataName+" as JSON",active:""}},[a("b-textarea",{attrs:{rows:"20"},model:{value:t.dataAsText,callback:function(e){t.dataAsText=e},expression:"dataAsText"}})],1),a("b-tab",{attrs:{title:"Display "+t.dataName+" as fields"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-5"},[a("b-select",{staticClass:"m-auto col-12",model:{value:t.field_select,callback:function(e){t.field_select=e},expression:"field_select"}},[a("b-select-option",{attrs:{value:"all"}},[t._v("All fields")]),a("b-select-option",{attrs:{value:"no-blanks"}},[t._v("Only non-blank fields")])],1),a("div",{staticClass:"overflow-auto"},[a("b-select",{staticClass:"m-auto col-12 overflow-scroll",attrs:{"select-size":"10",options:t.filteredFieldNames},model:{value:t.selectedFieldName,callback:function(e){t.selectedFieldName=e},expression:"selectedFieldName"}})],1),a("p",[t._v(" "+t._s(t.filteredFieldNames.length)+" fields displayed. "),a("a",{attrs:{target:"_blank",href:"https://www.npmjs.com/package/jsonpath"}},[t._v("JSONPath")]),t._v(" format used above. ")])],1),a("div",{staticClass:"col-7"},[t.selectedFieldName?0===t.getFieldValues(t.selectedFieldName).length?a("div",[a("p",[t._v("No values present for field "+t._s(t.selectedFieldName)+".")])]):t._e():a("div",[a("p",[t._v("Select a field for more information.")])]),t.recordCount>0?a("p",[t._v("The input contains "+t._s(t.recordCount)+" top-level records.")]):t._e(),t.selectedFieldName?a("b-table",{attrs:{items:t.getFieldValueCounts(t.selectedFieldName),bordered:"",striped:""}}):t._e()],1)])]),a("b-tab",{attrs:{title:"Display "+t.dataName+" as RDF"}})],1)],1)},u=[],f=a("53ca"),p=a("2909"),m=(a("4e82"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("5db7"),a("73d9"),a("159b"),a("b64b"),a("4de4"),a("d81d"),a("52cd")),h=a.n(m),v={name:"JSONExplorer",props:{data:{type:Object,required:!0},dataName:{type:String,default:"data"}},data:function(){return{selectedFieldName:"",field_select:"all"}},computed:{fieldNames:function(){function t(e,a){if(Array.isArray(a))return Object(p["a"])(new Set(a.flatMap((function(a){return t(e+"[*]",a)})))).sort();if(a instanceof Object){var r=[];return Object.keys(a).forEach((function(s){var n="".concat(e,".").concat(s);r.push(n),t("".concat(e,".").concat(s),a[s]).forEach((function(t){r.push(t)}))})),["".concat(e)].concat(r).sort()}return[]}return t("$",this.data)},filteredFieldNames:function(){var t=this,e=this.fieldNames;return"all"===this.field_select?e:"no-blanks"===this.field_select?e.filter((function(e){return new Set(t.getFieldValues(e)).size>0})):e},recordCount:function(){if(Array.isArray(this.data))return this.data.length},dataAsText:function(){return JSON.stringify(this.data,null,2)}},methods:{getFieldValues:function(t){return t?h.a.query(this.data,t).filter((function(t){return null!==t})).flatMap((function(t){return Array.isArray(t)?t:[t]})):[]},getFieldValueCounts:function(t){var e=this.getFieldValues(t),a=e.reduce((function(t,e){return"object"===Object(f["a"])(e)&&(e=JSON.stringify(e,void 0,2)),t[e]=void 0===t[e]?1:t[e]+=1,t}),{});return console.log(a),Object.keys(a).map((function(t){var e={value:t,count:a[t]};return e})).sort((function(t){return t.count}))}}},b=v,y=a("2877"),g=Object(y["a"])(b,d,u,!1,null,"67d4ff53",null),S=g.exports,x={name:"App",components:{JSONExplorer:S},data:function(){return{ajv:new l.a({allErrors:!0}),inputData:{},inputURL:"./examples/gdc-head-and-mouth.json",loadError:void 0,transformError:void 0,lifterInstructions:[{src:"$[*].diagnoses[*]",dst:"$",mv:!0,via:[{src:"$.diagnosis_id",dst:"$.id"},{src:"$.age_at_diagnosis",dst:"$.age_at_diagnosis.valueDecimal",via:function(t){return parseInt(t)}},{dst:"$.age_at_diagnosis.unit",set:"days"}]}],jsonSchemaError:void 0,jsonSchema:{type:"array",items:{type:"object",properties:{id:{type:"string"},age_at_diagnosis:{properties:{valueDecimal:{type:"number"},unit:{type:"string",enum:["days"]}}}},requiredProperties:!1}},gdcQuery:{filters:{op:"in",content:{field:"cases.primary_site",value:["baseoftongue","floorofmouth","gum","hypopharynx","larynx","lip","nasalcavityandmiddleear","nasopharynx","oropharynx","otherandill-definedsitesinlip,oralcavityandpharynx","otherandunspecifiedmajorsalivaryglands","otherandunspecifiedpartsofmouth","otherandunspecifiedpartsoftongue","palate","tonsil"]}},expand:"diagnoses,samples",format:"JSON",size:200}}},computed:{inputDataAsText:{get:function(){return JSON.stringify(this.inputData,null,2)},set:function(t){try{this.inputData=JSON.parse(t),this.loadError=void 0}catch(e){this.loadError="Could not parse JSON: ".concat(e)}}},lifterInstructionsAsText:{get:function(){return JSON.stringify(this.lifterInstructions,null,2)},set:function(t){try{this.lifterInstructions=JSON.parse(t),this.transformError=void 0}catch(e){this.transformError="Could not parse transform instructions: ".concat(e)}}},jsonSchemaAsText:{get:function(){return JSON.stringify(this.jsonSchema,null,2)},set:function(t){try{this.jsonSchema=JSON.parse(t),this.ajv.compile(this.jsonSchema),this.jsonSchemaError=void 0}catch(e){this.jsonSchemaError="Could not parse JSON Schema instructions: ".concat(e)}}},transformedJSON:function(){var t=i()(this.lifterInstructions);return t(this.inputData)},transformedJSONAsText:function(){try{var t=this.transformedJSON;return JSON.stringify(t,null,2)}catch(e){return"Could not transform data: ".concat(e)}},jsonSchemaValidationResults:function(){var t=this.ajv.compile(this.jsonSchema),e=t(this.transformedJSON);if(e)return"No validation errors reported.";var a=this.ajv.errorsText(t.errors).replaceAll(", ","\n - ");return"Validator errors:\n - ".concat(a)},gdcQueryAsData:{get:function(){return JSON.stringify(this.gdcQuery,void 0,2)},set:function(t){this.gdcQuery=JSON.parse(t)}}},methods:{loadFromURL:function(t){var e=this;this.$http.get(t).then((function(t){e.inputData=JSON.parse(t.bodyText)}),(function(a){e.loadError="Could not load JSON from url ".concat(t,": ").concat(a.statusText)}))},gdcQueryExecute:function(){var t=this;this.$http.get("https://api.gdc.cancer.gov/cases",{params:this.gdcQuery}).then((function(e){t.inputData=JSON.parse(e.bodyText)}),(function(e){t.loadError="Could not load JSON from GDC: ".concat(e.statusText)}))}}},N=x,_=(a("034f"),Object(y["a"])(N,s,n,!1,null,null,null)),O=_.exports,j=a("5f5b"),w=a("b1e0"),J=(a("f9e3"),a("2dd8"),a("28dd"));r["default"].use(j["a"]),r["default"].use(w["a"]),r["default"].config.productionTip=!1,r["default"].use(J["a"]),new r["default"]({render:function(t){return t(O)}}).$mount("#app")},"85ec":function(t,e,a){}});
//# sourceMappingURL=index.75de3d21.js.map